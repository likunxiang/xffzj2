<template>
  <el-dialog title="查看付款证明" :visible.sync="isOpen" width="700px" @close="beforeClose" append-to-body>
    <el-row style="padding-bottom: 20px;">
      <el-form :model="ruleForm" ref="ruleForm" label-width="80px" label-position="top">
        <el-form-item label="提交日期" prop="imgUrl">
          <span>{{ruleForm.date}}</span>
        </el-form-item>
        <el-form-item label="付款证明" prop="imgUrl">
          <el-image style="width: 100px; height: 100px" :src="imgBasicUrl + img" fit="fit" v-for="(img,index) in ruleForm.imgUrl" :key="index"></el-image>
        </el-form-item>
        <el-form-item label="付款说明" prop="explain">
          <el-input disabled type="textarea" placeholder="感谢每一份努力" v-model="ruleForm.explain"></el-input>
        </el-form-item>
      </el-form>
    </el-row>
  </el-dialog>
</template>

<script>
  import { getPaidProve } from '@/api/settleRoleApi/supplierSupplySettlement/passCheck.js'
  export default {
    name: "index",
    props: {
      row: {
        type: Object,
        default: () => {
          return {}
        }
      }
    },
    data() {
      return {
        isOpen: true,
        ruleForm: {
          explain: '感谢每一份努力9999',
          date: '',
          imgUrl: [],
        },
        imgBasicUrl: this.$store.state.basics.img_url_set_acc
      };
    },
    methods: {
      close() {
        this.isOpen = false
        this.$emit('close')
      },
      beforeClose() {
        this.close()
      },
      async getPaidProve() {
        await getPaidProve({
          settleGuid: this.row.settleGuid,
        }).then(res => {
          console.log(res);
          let data = res.Tag[0].Table[0]
          this.ruleForm.explain = data.remark
          this.ruleForm.date = data.settleTime
          this.ruleForm.imgUrl = data.prove.split(',')
        })
      }
    },
    created() {
      console.log(this.row);
      this.getPaidProve()
    }
  };
</script>

<style lang="scss" scoped>
</style>
